---
layout: single
title: "[expo] Web View를 사용하여 Web page 띄우기"
categories: expo
---

#### 패키지 설치

```bash
npx expo install react-native-webview
```

#### 코드

```tsx
import React from "react";
import { StyleSheet, View, ActivityIndicator, StatusBar } from "react-native";
import { WebView } from "react-native-webview";
import Constants from "expo-constants"; // expo-constants는 Expo Go 앱의 상태 표시줄 높이 등을 가져오는 데 유용합니다.

export default function App() {
  const websiteUrl = "https://www.your-website.com"; // 여기에 실제 웹사이트 URL을 입력하세요.

  return (
    <View style={styles.container}>
      <StatusBar barStyle="dark-content" />{" "}
      {/* iOS의 경우 상태 표시줄 색상 설정 */}
      <WebView
        source={{ uri: websiteUrl }}
        style={styles.webview}
        // 로딩 중 표시
        renderLoading={() => (
          <ActivityIndicator
            color="#0000ff"
            size="large"
            style={styles.loadingIndicator}
          />
        )}
        startInLoadingState={true} // 초기 로딩 시 `renderLoading`을 호출하도록 설정
        // 오류 처리
        onError={(syntheticEvent) => {
          const { nativeEvent } = syntheticEvent;
          console.warn("WebView error: ", nativeEvent);
          // 사용자에게 오류 메시지를 보여주거나 다른 페이지로 리디렉션하는 로직 추가
          alert("웹페이지 로딩 중 오류가 발생했습니다. 다시 시도해주세요.");
        }}
        // 네비게이션 상태 변경 시 (뒤로 가기, 앞으로 가기 등)
        onNavigationStateChange={(navState) => {
          console.log("Navigation State Changed:", navState);
          // 특정 URL에 도달했을 때 앱 내에서 다른 동작을 수행하는 등 활용 가능
        }}
        // 자바스크립트 주입 (필요한 경우)
        // injectedJavaScript={`
        //   window.ReactNativeWebView.postMessage("Hello from WebView");
        // `}
        // onMessage={(event) => {
        //   console.log("Message from WebView:", event.nativeEvent.data);
        // }}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    // Expo Go 앱에서 상태 표시줄 영역을 고려하여 WebView가 그 아래에 위치하도록 합니다.
    paddingTop: Constants.statusBarHeight,
    backgroundColor: "#fff",
  },
  webview: {
    flex: 1,
  },
  loadingIndicator: {
    position: "absolute",
    left: 0,
    right: 0,
    top: 0,
    bottom: 0,
    justifyContent: "center",
    alignItems: "center",
  },
});
```

> 안드로이드, ios 사용자 고려한 추가 내용 필요! 예) 앞으로, 뒤로 버튼에 대한 제스쳐 또는 버튼에 대한 처리가 필요함, 페이지가 안떳을 때도 처리가 필요함

#### 참고자료

- https://velog.io/@posinity/react-native-expo%EB%A1%9C-%EC%9B%B9%EB%B7%B0-%EC%95%B1-%EA%B0%9C%EB%B0%9C%ED%95%B4%EB%B3%B4%EA%B8%B0
